#!/bin/bash

POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")
OUTPUT_DIR="pokemon_data_parallel"
mkdir -p "$OUTPUT_DIR"

echo "Fetching Pokémon data in parallel..."

for pokemon in "${POKEMON_LIST[@]}"; do
  {
    echo "Fetching $pokemon..."
    response=$(curl -s -w "%{http_code}" -o "$OUTPUT_DIR/$pokemon.json" "https://pokeapi.co/api/v2/pokemon/$pokemon")
    if [[ $response -eq 200 ]]; then
      echo "✅ $pokemon fetched successfully."
    else
      echo "❌ Failed to fetch $pokemon (HTTP $response)"
    fi
  } &
done

wait  # wait for all background jobs to complete

echo "✅ All data fetched in parallel!"
